<div class="container">
  <h2>Gesti√≥n de Turnos</h2>

  <div class="filters">
    <input type="text" [(ngModel)]="clientNameFilter" placeholder="Buscar por cliente">
    <input type="date" [(ngModel)]="dateFilter">
    <button (click)="onSearch()">Buscar</button>
  </div>

  <button (click)="openFormPopup()">Agregar Turno</button>

  <table>
    <tbody>
      @if (loading()) {
        <tr>
          <td colspan="5">Cargando turnos...</td>
        </tr>
      } @else if (appointments().length > 0) {
        @for (appointment of appointments(); track appointment.id) {
          <tr>
            <td>{{ appointment.clientName }}</td>
            <td>{{ appointment.appointmentDate }}</td>
            <td>{{ appointment.startTime }}</td>
            <td>{{ appointment.description }}</td>
            <td>
              <button>Editar</button>
              <button>Eliminar</button>
            </td>
          </tr>
        }
      } @else {
        <tr>
          <td colspan="5">No se encontraron turnos.</td>
        </tr>
      }
    </tbody>
  </table>
</div>

@if (showPopup()) {
  <app-appointment-form
    (formSubmitted)="onAppointmentSubmitted()"
    (formCanceled)="onAppointmentCanceled()"
  ></app-appointment-form>
}